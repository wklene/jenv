<div class="h-100 p-3 d-flex flex-column">
    <h3 class="mb-2">Todo item</h3>

    <!-- loading status -->
    @if(isLoading()){
        <div class="spinner-border m-2 mt-4" role="status" data-test="todo-details_loading">
            <span class="visually-hidden">Loading...</span>
        </div>
    } @else {
        <!-- afvangen als er geen todo item is gevonden. -->
        @if(!activeTodo() && newTodoMode() === false){
            <p data-test="todo-details_notfound">Helaas, geen todo item gevonden.</p>
        } @else {
            <!-- formulier voor tonen, bewerken en aanmaken van een todo item -->
            <form class="d-flex flex-column" [formGroup]="todoForm">
                <div class="mb-3 mt-1">
                    <label class="form-check-label" for="title">Title</label>
                    <input type="text" class="form-control" id="title" formControlName="title" />
                </div>
                <div class="mb-3">
                    <label class="form-check-label" for="description">Description</label>
                    <textarea class="form-control" id="description" formControlName="description" rows="3"></textarea>
                </div>
                <div class="mb-3">
                    <label class="form-check-label" for="deadline">Deadline</label>
                    <input type="date" class="form-control" id="deadline" formControlName="deadline" />
                </div>
                <div class="form-check mb-3">
                    <input class="form-check-input" type="checkbox" value="" id="completed" formControlName="completed" />
                    <label class="form-check-label" for="completed">Completed</label>
                </div>
            </form>
            
            <!-- acties voor het formulier, afhandelijk van de status -->
            <div class="d-flex mt-auto justify-content-between flex-row-reverse">
                <button type="submit" class="btn btn-primary" (click)="saveTodo()" data-test="todo-details_save">
                    Save
                </button>

                @if(activeTodo()){
                    <button type="submit" class="btn btn-danger" data-test="todo-details_delete" (click)="deleteTodo()">
                        Delete
                    </button>
                }
            </div>
        } 
    }
</div>
